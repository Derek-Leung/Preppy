<div id="recipeTable"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
    /*<![CDATA[*/
    var recipeData = null;
    $(document).ready(function() {
             $.ajax({
                url: "./Content/getRandomRecipe.php",
                dataType: "json",
                type: "GET",
                data: {output: 'json'},
                success: function(data) {
                    console.log(data);
                    recipeData = data;
                    var content = "<table><tr><th>Recipe Name</th><th>Image</th><th>";
              
                    for (var i=0; i < data.root.body.recipes.length; i++){
                      content += "<tr><td><a onclick=\"getRecipeStep(" + data.root.body.recipes[i].id + ")\">" + data.root.body.recipes[i].title;
                      content += "</a></td><td><a onclick=\"getRecipeStep(" + data.root.body.recipes[i].id + ")\"><img src=\"" + data.root.body.recipes[i].image + "\"/></a></td></tr>";
                    }
                    content += "</table>";
                    $("#recipeTable").html(content);
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                      $("#p1").text(textStatus + " " + errorThrown
                               + jqXHR.responseText);
                    } 
						 });
    });
					function getRecipeStep(num){

            for (var x=0; x < recipeData.root.body.recipes.length; x++){
              if (num == recipeData.root.body.recipes[x].id){
                var recipeInfo = "<h1>" + recipeData.root.body.recipes[x].title + "</h1><br/>";
                recipeInfo += "<img src=\"" + recipeData.root.body.recipes[x].image + "\"/>";
                recipeInfo += "<h2>Preparation Time (Minutes) : </h2>" + recipeData.root.body.recipes[x].preparationMinutes + "<br/>";
                recipeInfo += "<h2>Cooking Time (Minutes) : </h2>" + recipeData.root.body.recipes[x].cookingMinutes + "<br/>";
                recipeInfo += "<h2>Ingredients</h2><br/><table>";
                for (var y =0; y < recipeData.root.body.recipes[x].extendedIngredients.length; y++){
                  recipeInfo += "<tr><td>" + recipeData.root.body.recipes[x].extendedIngredients[y].original + "</td></tr>";
                }
                recipeInfo += "</table><br/>";
                recipeInfo += "<h2>Instructions</h2><br/><table>";
                for(var n =0; n < recipeData.root.body.recipes[x].analyzedInstructions[0].steps.length; n++){
                  recipeInfo += "<tr><td>" + recipeData.root.body.recipes[x].analyzedInstructions[0].steps[n].number + ": " + recipeData.root.body.recipes[x].analyzedInstructions[0].steps[n].step + "</td></tr>"
                }
                recipeInfo += "</table>"
                $("#recipeTable").html(recipeInfo);
              }
            }
          	};
    /*]]>*/
</script>

